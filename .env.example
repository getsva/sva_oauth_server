# Django Settings
# ===============
# Environment: development or production
ENVIRONMENT=development

# Django Secret Key - Generate a secure key for production
# Generate using: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
DJANGO_SECRET_KEY=django-insecure-default-key-for-dev

# Debug mode (automatically set to False in production)
# DEBUG=True

# Allowed hosts (comma-separated list)
# For Azure App Service: oauth-api.azurewebsites.net,oauth-api.getsva.com
ALLOWED_HOSTS=127.0.0.1,localhost

# Database Configuration
# ======================
# For PostgreSQL (production):
# DATABASE_URL=postgresql://user:password@host:port/dbname
# For SQLite (development, default):
# DATABASE_URL=sqlite:///db.sqlite3
DATABASE_URL=

# SSL requirement for database connection
DB_SSL_REQUIRE=False
# Use DB_CONN_MAX_AGE=0 when PostgreSQL has few connection slots (e.g. Azure Basic) to avoid "remaining connection slots" errors
# 0 = close connection after each request; default 600 = keep connection 10 min
# DB_CONN_MAX_AGE=0

# Security Settings (Production)
# ===============================
# Enable SSL redirect in production
SECURE_SSL_REDIRECT=True

# CORS Configuration
# ==================
# Comma-separated list of allowed origins
# Development defaults: http://localhost:5173,http://localhost:8081,http://localhost:3000
# Production: https://getsva.com,https://app.getsva.com
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:8081,http://localhost:3000,http://127.0.0.1:5173,http://127.0.0.1:8081,http://127.0.0.1:3000

# Internal Service Communication
# ===============================
# Token for service-to-service authentication
INTERNAL_SERVICE_TOKEN=dev-shared-secret

# Header name for internal service token
INTERNAL_SERVICE_HEADER=X-Service-Token

# Timeout for internal service requests (seconds)
INTERNAL_SERVICE_TIMEOUT=5

# Data Token Configuration
# ========================
# Secret key for data tokens (must match sva_server)
DATA_TOKEN_SECRET=dev-data-token-secret

# Algorithm for data tokens
DATA_TOKEN_ALGORITHM=HS256

# TTL for data tokens (seconds)
DATA_TOKEN_TTL_SECONDS=300

# Issuer for data tokens
DATA_TOKEN_ISSUER=sva_oauth

# OAuth Configuration
# ===================
# Core consent URL (where users are redirected for consent)
# Development: http://localhost:8080/consent
# Production: https://app.getsva.com/consent
CORE_CONSENT_URL=http://localhost:8080/consent

# Authorization request TTL (seconds)
AUTHORIZATION_REQUEST_TTL_SECONDS=600

# JWT Token Configuration
# =======================
# Access token lifetime in hours
JWT_ACCESS_TOKEN_LIFETIME_HOURS=1

# Refresh token lifetime in days
JWT_REFRESH_TOKEN_LIFETIME_DAYS=7

# Rotate refresh tokens on use
JWT_ROTATE_REFRESH_TOKENS=True

# Blacklist refresh tokens after rotation
JWT_BLACKLIST_AFTER_ROTATION=True

# Update last login timestamp
JWT_UPDATE_LAST_LOGIN=True

# JWT algorithm
JWT_ALGORITHM=HS256

# Email Configuration
# ===================
# Email backend: 'console' for development, 'smtp' for production
EMAIL_BACKEND=console

# SMTP Settings (for production)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-password
DEFAULT_FROM_EMAIL=no-reply@yourdomain.com

# Frontend URL Configuration
# ==========================
# Frontend URL for email links and OAuth redirects
# Development: http://localhost:8081
# Production: https://getsva.com
FRONTEND_URL=http://localhost:8081

# OAuth Provider Settings
# =======================
# These are configured via Django Admin under Social Applications
# Or use the management command: python manage.py setup_oauth
# 
# Google OAuth:
# GOOGLE_CLIENT_ID=your-google-client-id
# GOOGLE_CLIENT_SECRET=your-google-client-secret
#
# GitHub OAuth:
# GITHUB_CLIENT_ID=your-github-client-id
# GITHUB_CLIENT_SECRET=your-github-client-secret
